(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{14:function(e,t,o){},15:function(e,t,o){},17:function(e,t,o){"use strict";o.r(t);var n=o(1),i=o.n(n),s=o(9),a=o.n(s),c=(o(14),o.p,o(15),o(2)),l=o(3),r=o(5),d=o(4),u=(o(8),o(6)),h=o(0),p=function(e){Object(r.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(c.a)(this,o),(n=t.call(this,e)).state={inputvalue:"",copy:!1,checked:n.props.checked},n.inputRef=i.a.createRef(),n.composition=!1,n.handlePaste=n.handlePaste.bind(Object(u.a)(n)),n}return Object(l.a)(o,[{key:"handlePaste",value:function(e){e.preventDefault();var t=(e.clipboardData||window.clipboardData).getData("text");document.execCommand("insertText",!1,t)}},{key:"componentDidMount",value:function(){if(this.props.focus){var e=document.createRange(),t=document.getSelection();e.selectNodeContents(this.inputRef.current),e.collapse(!1),t.removeAllRanges(),t.addRange(e),this.inputRef.current.focus()}this.props.checkbox&&this.props.handleStoreItem(this.state.checked,this.inputRef.current.outerText)}},{key:"handleCompositionStart",value:function(){this.composition=!0}},{key:"handleCompositionEnd",value:function(){this.composition=!1}},{key:"handleToDoInput",value:function(e){this.setState({inputvalue:e.target.outerText}),this.props.handleStoreItem(this.state.checked,e.target.outerText,!0)}},{key:"handleToDoKeyDown",value:function(e){this.composition||"Enter"!==e.key||(console.log("Pressed enter!!",e),e.preventDefault(),null===e.target.outerText||(this.props.checkbox?this.props.handleCreateNext(this.props.id):(e.focus=!0,this.props.handleToDoBlur(e,!0))))}},{key:"handleToDoBlur",value:function(e){this.props.checkbox||""!==e.target.outerText&&this.props.handleToDoBlur(e,!1),this.props.handleStoreItem(this.state.checked,e.target.outerText,!1)}},{key:"handleCheck",value:function(e){var t=this.state.checked;this.setState({checked:!t}),this.props.handleStoreItem(!t,this.inputRef.current.outerText,!1)}},{key:"render",value:function(){var e,t=this;e=!0===this.props.checkbox?Object(h.jsx)("input",{type:"checkbox",id:"check",className:"todo-checkbox",onChange:function(e){return t.handleCheck(e)},checked:this.state.checked}):Object(h.jsx)("div",{className:"plus-icon todo-add",children:"\u254b"});var o=this.props.checkbox?Object(h.jsx)("button",{onClick:this.props.handleDeleteToDoItem,className:"todo-item-delete-btn",children:"X"}):null;return Object(h.jsxs)("div",{className:"todo-item",children:[e,Object(h.jsx)("div",{className:"todo-item-label",children:Object(h.jsx)("div",{type:"text",contentEditable:"true",className:this.state.checked?"todo-item-input todo-item-checked":"todo-item-input",placeholder:this.props.placeholder,value:this.props.renew,onChange:function(e){return t.handleToDoInput(e)},onInput:function(e){return t.handleToDoInput(e)},onBlur:function(e){return t.handleToDoBlur(e)},onKeyDown:function(e){return t.handleToDoKeyDown(e)},onPaste:this.handlePaste,autoComplete:"off",spellCheck:"false",wrap:"soft",suppressContentEditableWarning:!0,ref:this.inputRef,onCompositionStart:function(){return t.handleCompositionStart()},onCompositionEnd:function(){return t.handleCompositionEnd()},children:this.props.value})}),o]})}}]),o}(i.a.Component),f=function(e){Object(r.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(c.a)(this,o),(n=t.call(this,e)).state={itemsTodo:[{id:"create",value:"",checked:!1,focus:!1}],itemsDone:[],sublistTitle:"To-do",renew:!0},n}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("toDoList");t&&JSON.parse(t).forEach((function(t){t.id===e.props.listid&&e.setState({itemsTodo:t.tree,sublistTitle:t.sublistTitle})}))}},{key:"handleStoreItem",value:function(e,t,o,n){var i=this.state.itemsTodo.slice();i.map((function(n){n.id===e&&(n.value=o,n.checked=t),n.focus=!1})),this.props.handleStoreToDoList(i)}},{key:"handleClickLabel",value:function(e){console.log(this),console.log(e)}},{key:"handleToDoBlur",value:function(e,t){var o=this.state.itemsTodo.slice(),n=Date.now();this.setState({itemsTodo:o.concat([{id:n,value:e.target.outerText,checked:!1,focus:t}]),renew:!this.state.renew})}},{key:"handleCreateNext",value:function(e){var t=this.state.itemsTodo.slice(),o=t.findIndex(this.isIdSame,e),n=t.splice(o+1,0,{id:Date.now(),value:"",checked:!1,focus:!0});console.log(o,"removed",n),this.setState({itemsTodo:t,renew:!this.state.renew})}},{key:"isIdSame",value:function(e){return e.id===this}},{key:"handleDeleteToDoItem",value:function(e){var t=e,o=this.state.itemsTodo.slice(),n=o.findIndex(this.isIdSame,t),i=o.splice(n,1);console.log(n,"removed",i),this.setState({itemsTodo:o}),this.props.handleStoreToDoList(o)}},{key:"handleStoreSubListTitle",value:function(e){console.log(e.target.innerText),this.props.handleStoreSubListTitle(e.target.innerText)}},{key:"render",value:function(){var e,t,o=this,n=this.state.itemsTodo.slice();return 0===n.length?e=null:(e=n.map((function(e,t){return"create"===e.id||!0===e.checked?null:Object(h.jsx)(p,{id:e.id,value:e.value,handleClickLabel:function(e){return o.handleClickLabel(e)},handleToDoBlur:function(e,t){return o.handleToDoBlur(e,t)},handleDeleteToDoItem:function(){return o.handleDeleteToDoItem(e.id)},handleCreateNext:function(e){return o.handleCreateNext(e)},handleStoreItem:function(t,n){return o.handleStoreItem(e.id,t,n)},placeholder:"...",checkbox:!0,focus:e.focus,checked:e.checked},e.id)})),t=n.map((function(e,t){return"create"===e.id||!1===e.checked?null:Object(h.jsx)(p,{id:e.id,value:e.value,handleClickLabel:function(e){return o.handleClickLabel(e)},handleToDoBlur:function(e,t){return o.handleToDoBlur(e,t)},handleDeleteToDoItem:function(){return o.handleDeleteToDoItem(e.id)},handleCreateNext:function(e){return o.handleCreateNext(e)},handleStoreItem:function(t,n,i){return o.handleStoreItem(e.id,t,n,i)},placeholder:"...",checkbox:!0,focus:e.focus,checked:e.checked},e.id)}))),Object(h.jsxs)("div",{className:"sublist",children:[Object(h.jsxs)("div",{className:"sublist-header",children:[Object(h.jsx)("span",{contentEditable:"true",spellCheck:"false",suppressContentEditableWarning:!0,onBlur:function(e){return o.handleStoreSubListTitle(e)},children:this.state.sublistTitle}),Object(h.jsx)("button",{className:"delete-sublist-btn",onClick:this.props.handleDeleteToDo,children:"x"})]}),e,Object(h.jsx)(p,{handleClickLabel:function(e){return o.handleClickLabel(e)},handleToDoBlur:function(e,t){return o.handleToDoBlur(e,t)},handleStoreItem:function(e){return o.handleStoreItem("add"+o.state.renew,e)},placeholder:"Add sth to the list...",checkbox:!1,renew:this.state.renew},"add"+this.state.renew),Object(h.jsx)("hr",{className:"todolist-hr"}),t]})}}]),o}(i.a.Component),m=function(e){Object(r.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(c.a)(this,o),(n=t.call(this,e)).state={count:0,idlist:[],todotree:[]},n}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("toDoList");if(e){var t=JSON.parse(e);console.log("TODOLISTMOUNT",t);var o=[],n=0;t.map((function(e){o=o.concat([e.id]),n++})),this.setState({count:n,idlist:o,todotree:t})}else{var i=[{id:1636337260150,tree:[{id:1636337442117,value:"Play apex",checked:!0,focus:!1},{id:1636337872537,value:"learn Redux",checked:!1,focus:!1}],sublistTitle:"Click to edit todo list title"}],s=[],a=0;i.map((function(e){s=s.concat([e.id]),a++})),this.setState({count:a,idlist:s,todotree:i}),this.storeTree(i)}}},{key:"storeTree",value:function(e){0===e.length&&localStorage.removeItem("toDoList");var t=JSON.stringify(e.slice());localStorage.setItem("toDoList",t)}},{key:"handleStoreSubListTitle",value:function(e,t){var o=this.state.todotree.slice();o.map((function(o){o.id===e&&(o.sublistTitle=t)})),this.setState({todotree:o}),this.storeTree(o),console.log("subtitle",o,e,t)}},{key:"handleStoreToDoList",value:function(e,t){this.state.idlist.slice();var o=this.state.todotree.slice();o.map((function(o){o.id===e&&(o.tree=t)})),this.setState({todotree:o}),this.storeTree(o)}},{key:"handleCreateToDo",value:function(){var e=Date.now(),t=this.state.idlist.slice(),o=this.state.todotree.slice().concat([{id:e,tree:[],sublistTitle:"To-do"}]);this.setState({count:this.state.count+1,idlist:t.concat([e]),todotree:o}),console.log("clicked",e),this.storeTree(o)}},{key:"isIdSame",value:function(e){return e.id===this}},{key:"handleDeleteToDo",value:function(e){var t=this.state.idlist.slice(),o=this.state.todotree.slice(),n=t.indexOf(e),i=t.splice(n,1);n=o.findIndex(this.isIdSame,e),i=o.splice(n,1),this.setState({count:this.state.count-1,idlist:t,todotree:o}),console.log("deleted",e,t,o,i),this.storeTree(o)}},{key:"render",value:function(){var e=this,t=this.state.idlist.slice().map((function(t){return Object(h.jsx)(f,{listid:t,handleDeleteToDo:function(){return e.handleDeleteToDo(t)},handleStoreToDoList:function(o){return e.handleStoreToDoList(t,o)},handleStoreSubListTitle:function(o){return e.handleStoreSubListTitle(t,o)}},t)}));return Object(h.jsxs)("div",{className:"todo-list-container",children:[Object(h.jsx)("h2",{children:"This is todo list"}),Object(h.jsx)("p",{children:"contenteditable and stored in localStorage"}),Object(h.jsx)("div",{className:"sublist-container",children:Object(h.jsxs)("div",{className:"todo-create-btn-container",children:[t,Object(h.jsx)("button",{className:"create-todo-list-btn",onClick:function(){return e.handleCreateToDo()},children:"+"})]})})]})}}]),o}(i.a.Component);var b=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("div",{className:"App-container",children:Object(h.jsx)(m,{})})})},v=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,18)).then((function(t){var o=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;o(e),n(e),i(e),s(e),a(e)}))};a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(b,{})}),document.getElementById("root")),v()},8:function(e,t,o){}},[[17,1,2]]]);
//# sourceMappingURL=main.867c8967.chunk.js.map